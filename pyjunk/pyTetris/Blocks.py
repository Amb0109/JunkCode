'''
Created on 2012-1-6

@author: Amb
'''

import random

BLOCK = [
         #Normal shape
         [[0,1,0,0],[0,0,0,0],[0,1,0,0],[0,0,0,0],
          [0,1,0,0],[1,1,1,1],[0,1,0,0],[1,1,1,1],
          [0,1,0,0],[0,0,0,0],[0,1,0,0],[0,0,0,0],
          [0,1,0,0],[0,0,0,0],[0,1,0,0],[0,0,0,0],
          [0,1,3,1],[1,0,1,3],[0,1,3,1],[1,0,1,3] # box info
          ],
         [[0,0,1,0],[0,0,0,0],[0,0,1,0],[0,0,0,0],
          [0,1,1,0],[1,1,0,0],[0,1,1,0],[1,1,0,0],
          [0,1,0,0],[0,1,1,0],[0,1,0,0],[0,1,1,0],
          [0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],
          [0,1,2,2],[1,0,2,2],[0,1,2,2],[1,0,2,2] #
          ],
         [[0,1,0,0],[0,0,0,0],[0,1,0,0],[0,0,0,0],
          [0,1,1,0],[0,0,1,1],[0,1,1,0],[0,0,1,1],
          [0,0,1,0],[0,1,1,0],[0,0,1,0],[0,1,1,0],
          [0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],
          [0,1,2,2],[1,1,2,3],[0,1,2,2],[1,1,2,3] #
          ],
         [[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,1,0,0],
          [0,1,1,1],[0,1,1,0],[0,0,1,0],[0,1,0,0],
          [0,1,0,0],[0,0,1,0],[1,1,1,0],[0,1,1,0],
          [0,0,0,0],[0,0,1,0],[0,0,0,0],[0,0,0,0],
          [1,1,2,3],[1,1,3,2],[1,0,2,2],[0,1,2,2]
          ],
         [[0,0,0,0],[0,0,1,0],[0,0,0,0],[0,0,0,0],
          [1,1,1,0],[0,0,1,0],[0,1,0,0],[0,1,1,0],
          [0,0,1,0],[0,1,1,0],[0,1,1,1],[0,1,0,0],
          [0,0,0,0],[0,0,0,0],[0,0,0,0],[0,1,0,0],
          [1,0,2,2],[0,1,2,2],[1,1,2,3],[1,1,3,2]
          ],
         [[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],
          [0,1,1,0],[0,1,1,0],[0,1,1,0],[0,1,1,0],
          [0,1,1,0],[0,1,1,0],[0,1,1,0],[0,1,1,0],
          [0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],
          [1,1,2,2],[1,1,2,2],[1,1,2,2],[1,1,2,2]
          ],
         [[0,1,0,0],[0,0,0,0],[0,1,0,0],[0,1,0,0],
          [0,1,1,0],[1,1,1,0],[1,1,0,0],[1,1,1,0],
          [0,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0],
          [0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],
          [0,1,2,2],[1,0,2,2],[0,0,2,1],[0,0,1,2]
          ],
         
         #Special shape
         [[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0],
          [1,1,1,0],[1,1,1,0],[1,1,1,0],[1,1,1,0],
          [0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0],
          [0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],
          [0,0,2,2],[0,0,2,2],[0,0,2,2],[0,0,2,2]
          ],
         [[0,0,0,0],[1,1,0,0],[1,1,1,0],[0,1,1,0],
          [1,0,1,0],[1,0,0,0],[1,0,1,0],[0,0,1,0],
          [1,1,1,0],[1,1,0,0],[0,0,0,0],[0,1,1,0],
          [0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],
          [1,0,2,2],[0,0,2,1],[0,0,1,2],[0,1,2,2]
          ],
         [[1,1,0,0],[0,0,1,0],[1,1,0,0],[0,0,1,0],
          [0,1,0,0],[1,1,1,0],[0,1,0,0],[1,1,1,0],
          [0,1,1,0],[1,0,0,0],[0,1,1,0],[1,0,0,0],
          [0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],
          [0,0,2,2],[0,0,2,2],[0,0,2,2],[0,0,2,2]
          ]
         #......
         ]

BLOCKW = 4
BLOCKH = 4

BLOCK_MAXN = 7

def randblock(maxn):
    if maxn > BLOCK_MAXN: maxn = BLOCK_MAXN
    
    block = random.randint(0,maxn-1)
    rotate = random.randint(0,3)
    return [block,rotate]

def getshape(block):        
    shape = []
    for k in [0,1,2,3]:
        shape.append(BLOCK[block[0]][k*4+block[1]])
    return shape

def getminirect(block):
    return BLOCK[block[0]][16+block[1]]

def rotate(block):
    block[1] += 1
    if block[1] >= 4:
        block[1] = 0
    return block

def undorotate(block):
    block[1] -= 1
    if block[1] < 0:
        block[1] = 3
    return block
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
